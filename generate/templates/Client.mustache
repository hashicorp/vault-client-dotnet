{{>partial_header}}

using System;
using System.Net.Http;
using {{packageName}}.Api;
using {{packageName}}.Client;

namespace {{packageName}}
{
    public class {{packageName}}Client
    {
        {{#apiInfo}}
        {{#apis}}
        {{#operations}}
        public {{packageName}}.Api.{{classname}} {{classname}};
        {{/operations}}
        {{/apis}}
        {{/apiInfo}}
                
        /// <summary>
        /// Initializes a new instance of the <see cref="{{packageName}}Client"/> class
        /// </summary>
        public {{packageName}}Client(Configuration configuration)
        {
            if (configuration == null) throw new ArgumentNullException(nameof(Configuration));

            var apiClient = new ApiClient(configuration);

            {{#apiInfo}}
            {{#apis}}
            {{#operations}}
            this.{{classname}} = new {{packageName}}.Api.{{classname}}(apiClient);
            {{/operations}}
            {{/apis}}
            {{/apiInfo}}
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="{{packageName}}Client"/> class
        /// </summary>
        public {{packageName}}Client(string VaultAddress)
        {
            if(string.IsNullOrEmpty(VaultAddress))
            {
                throw new ArgumentException("Cannot be empty", "VaultAddress");
            }

            var configuration = new Configuration(VaultAddress);

            var apiClient = new ApiClient(configuration);
            
            {{#apiInfo}}
            {{#apis}}
            {{#operations}}
            this.{{classname}} = new {{packageName}}.Api.{{classname}}(apiClient);
            {{/operations}}
            {{/apis}}
            {{/apiInfo}}
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="{{packageName}}Client"/> class
        /// </summary>
        public {{packageName}}Client(string VaultAddress, HttpClient httpClient)
        {
            if(string.IsNullOrEmpty(VaultAddress)) throw new ArgumentException("Cannot be empty", "VaultAddress");
            if(httpClient == null) throw new ArgumentNullException(nameof(httpClient));

            var configuration = new Configuration(VaultAddress);

            var apiClient = new ApiClient(configuration, httpClient);
            
            {{#apiInfo}}
            {{#apis}}
            {{#operations}}
            this.{{classname}} = new {{packageName}}.Api.{{classname}}(apiClient);
            {{/operations}}
            {{/apis}}
            {{/apiInfo}}
        }
    }    
}